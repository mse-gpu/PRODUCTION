<?xml version="1.0"?>

<!-- Autor : Cedric.Bilat@he-arc.ch -->
<!-- version: 0.1.7 -->
		
<project name="WorkspaceManager"  default="workspaceBuild" basedir=".">

	<description>
		By Bilat Cedric
	</description>

	<!-- ************************** -->
	<!--  	Tache personalisee  	-->
	<!-- ************************** -->

	<taskdef name="ForEachProjets" 						classname="com.bilat.tools.addon.ant.ForEachProjets"/> 
	<taskdef name="CopieClassWorkspaceToClassProjects" 	classname="com.bilat.tools.addon.ant.CopieClassWorkspaceToClassProjects"/> 

	<!-- ************************** -->
	<!--  		Property			-->
	<!-- ************************** -->

	<property file="../Workspace.properties"/>
	<property file="variables.properties"/>
	
	<path id="workspace.projet.name.list">
		<fileset dir="${workspace.projet.list.dir}">
			<include name="Projet*.properties" />
		</fileset>
	</path>
	
	<!-- ***********************  -->
	<!--  	Info		 	      -->
	<!-- ************************ -->
	
	<target name="info">
		<echo message="Systeme properties :"/>
		<echo message="ant                : ${ant.version}"/>
		<echo message="basedir            : ${basedir}"/>
		<echo message="jvm                : ${ant.java.version}"/>
		<echo message=" "/>
		<echo message="User properties :"/>
		<echo message="workspace.author             : ${workspace.author}"/>
		<echo message="workspace.organisation       : ${workspace.organisation}"/>
		<echo message="workspace.name               : ${workspace.name}"/>
	</target>
	
	<!-- ***********************  -->
	<!--  	Main Consolider		  -->
	<!-- ************************ -->
	
	<target name="workspaceBuild" description="compiler consolider workspace + jar consolider + doc consolider">
		<sequential>
			<antcall target="info" /> 
			<antcall target="workspaceCleanAll" /> 
			<antcall target="workspaceCompilerJarerTester" />  
			<antcall target="workspaceDeploy" /> 
			<antcall target="workspaceDocConsoliderRun" /> 
			<antcall target="workspaceZipSrcConsolider" /> 
			<!-- <antcall target="workspaceRunTest" /> inutile fait dans workspaceCompilerJarerTester -->
		</sequential>
	</target>
		
	<!-- ***********************  -->
	<!--  	Compiler consolider   -->
	<!-- ************************ -->	
	
	<!-- src: all src of project in workspace -->
	<!-- classe: a unique temporary folder -->
	
	<!-- Probleme : Peux-t on donner plusieurs src a javac et specifier a chaque src ou mettre les .class  ? -->
	<!-- Solution provisoire : compiler ensemble les sources de tous les projets, et mettre l ensemble des .class dans un folder temp. -->
	<!-- Puis recopier dans les projets les .class respectif, et effacer le folder temp-->
	<target name="workspaceCompilerJarerTester" description="one jar for all workspace : compiler + jarer"> 
	
		<path id="workspace.src">
			<dirset dir="${workspace.root.path}/." > 
				<include name="**/src" />
			</dirset> 
		</path>
			
		<path id="workspace.jar.dir.ext">
			<fileset dir="${workspace.deploy.path}/bin/ext">
				<include name="*.jar" />
				<!--<exclude name="${workspace.projetJar.list}" /> -->
			</fileset>
		</path>
			
		<antcall target="cleanClassConsolider" /> 
		
		<mkdir dir="${workspace.deploy.consolider.class.temp.dir}"/>
		<mkdir dir="${workspace.deploy.consolider.class.temp.dir}/ressources"/>
		
		<!-- si on  lance depuis eclipse dans une jre externe, probleme d'encodage : solution nowarn="True", bug? -->
		<javac destdir="${workspace.deploy.consolider.class.temp.dir}" verbose="false" optimize="True" nowarn="True">
			<src refid="workspace.src" />
			<classpath refid="workspace.jar.dir.ext" /> 
		</javac>
		
		<!-- passer de consolider a separer : on remet resultat global dans projet -->
		<antcall target="workspaceMoveClassToProjet" /> 
		<antcall target="workspaceCopierRessourceProjetInClassFolder" /> 
		
		<antcall target="workspaceCopierRessourceConsolider" />
		<antcall target="workspaceJarConsolider" />
		<antcall target="runJunitConsolider" />
		<antcall target="cleanClassConsolider" /> 
	</target>	
	
	<target name="workspaceCompilJarRun" description="Eclipse UseFull : compiler + jarer + run jar version"> 
		<antcall target="workspaceCompilerJarer" /> 
		<antcall target="workspaceRunClassVersion" /> 
	</target>
	
	<target name="workspaceCopierRessourceConsolider"  description="private">
		<ForEachProjets  namePathAntProjetList="workspace.projet.name.list"  nameProperty="bilat.ant.workspace.projet.i" target="projetCopierRessourceClassToworkSpacei"/> 
	</target>	
		
	<target name="projetCopierRessourceClassToworkSpacei" description="private">
		<copy todir="${workspace.deploy.consolider.class.temp.dir}/ressources" >
			<fileset dir="${workspace.root.path}/${bilat.ant.workspace.projet.i}/src/ressources" />
		</copy>
	</target>
	
	<target name="workspaceRunClassVersion" >
		<ForEachProjets  namePathAntProjetList="workspace.projet.name.list"  nameProperty="bilat.ant.workspace.projet.i" target="projetRunClassVersioni"/> 
	</target>	
	
	<target name="projetRunClassVersioni" description="private">
		<echo message="${bilat.ant.workspace.projet.i}" />
		<ant antfile="projetManager.xml" target="runClassVersion" inheritALL="false">	
			<property file="../Projet${bilat.ant.workspace.projet.i}.properties"/>
		</ant>
	</target>
	
	<target name="workspaceMoveClassToProjet" description="private" >
	
		<path id="projet.all.bin.dir">
			<dirset dir="${workspace.root.path}/." > 
				<include name="**/bin" />
			</dirset> 
		</path>
		
		<path id="projet.all.src.dir">
			<dirset dir="${workspace.root.path}/." > 
				<include name="**/src" />
			</dirset> 
		</path>
		
		<!-- pose probleme de basedir dans eclipse (bug?). Astuce : Lancer depuis une jre externe dans l'onglet : jre -->
		<CopieClassWorkspaceToClassProjects  workspaceClassDir="${workspace.deploy.consolider.class.temp.dir}" namePathAntProjetSrcDir="projet.all.src.dir" namePathAntProjetClassDir="projet.all.bin.dir"/>	
	
	</target>	
		
	<!-- ***********************  -->
	<!--  	Jar consolider        -->
	<!-- ************************ -->	
	
	<!-- depend de workspaceCompilerJarer -->
	<target name="workspaceJarConsolider" description="private : one jar for workspace from workspavce class temp">
		<!-- pas executable pour l'instant, pas de version -->
	    <antcall target="cleanJarConsolider" />
		<jar jarfile="${workspace.deploy.jar.consolider.file}"  compress="true" update="false" >
			<fileset dir="${workspace.deploy.consolider.class.temp.dir}">
				<exclude name="**/*${workspace.test.class.suffixe}.class"/>
				<exclude name="**/test/**"/> 
				<exclude name="**/tests/**"/> 
				<exclude name="**/junit**"/> 
				<exclude name="**/*.auml"/> 
			</fileset>
		</jar>
	</target>	
	
	<target name="workspaceCopierRessourceProjetInClassFolder" >
		<ForEachProjets  namePathAntProjetList="workspace.projet.name.list"  nameProperty="bilat.ant.workspace.projet.i" target="projetCopierRessourceClassi"/> 
	</target>	
	
	<target name="projetCopierRessourceClassi" description="private">
		<echo message="${bilat.ant.workspace.projet.i}" />
		<ant antfile="projetManager.xml" target="copyRessource" inheritALL="false">	
			<property file="../Projet${bilat.ant.workspace.projet.i}.properties"/>
		</ant>
	</target>
	
	<!-- ***********************  -->
	<!--  	test  consolider     -->
	<!-- ************************ -->
	
	<!-- depend de workspaceCompilerJarer -->
	
	<path id="classPathJunitConsolider" >
		<pathelement location="${workspace.deploy.consolider.class.temp.dir}" />	
			
		<fileset dir="${workspace.deploy.jar.dir.ext}" >
			<include name="*.jar" />
		</fileset>
	</path>
		
	<!-- call by jar consolider -->
	<target name="runJunitConsolider" description="private"> 
		<antcall target="runJunitXmlConsolider" /> 
		<antcall target="runJunitXmlToHtmlConsolider" /> 
		<antcall target="runJunitReportConsolider" />
	</target>
		
	<target name="runJunitXmlConsolider" description="private">
			
			<antcall target="cleanJunitReportConsolider" /> 
			<mkdir dir="${workspace.deploy.junit.report.dir}/xml"/>
			<mkdir dir="${workspace.deploy.junit.temp.dir}"/>
			<mkdir dir="${workspace.deploy.consolider.class.temp.dir}/ioTests/inputs"/>
			<mkdir dir="${workspace.deploy.consolider.class.temp.dir}/ioTests/outputs"/>
			<mkdir dir="${workspace.deploy.consolider.class.temp.dir}/ioTests/persistances"/>
			<mkdir dir="${workspace.deploy.consolider.class.temp.dir}/dll"/>
			<antcall target="copyIoTests" /> 
			<copy todir="${workspace.deploy.consolider.class.temp.dir}/dll" >
				<fileset dir="${workspace.deploy.dll.dir}" />
			</copy>	
		
			<!-- Effectue les tests et fabrique un rapport .xml des résultats -->
			<junit fork="yes" haltonfailure="no" printsummary="no" maxmemory="1400m" dir="${workspace.deploy.consolider.class.temp.dir}" tempdir="${workspace.deploy.junit.temp.dir}" >
				
				<classpath refid="classPathJunitConsolider" /> 
				
				<formatter type="xml" />
				
				<batchtest fork="yes"   todir="${workspace.deploy.junit.report.dir}/xml"> 
					 <fileset dir="${workspace.deploy.consolider.class.temp.dir}"> 
					  	<include name="**/*${workspace.test.class.suffixe}.class" />
					  </fileset>
				</batchtest>
				
			</junit>
			
			<delete dir="${workspace.deploy.junit.temp.dir}" includeemptydirs="true"/> 
		</target>
			
		<target name="runJunitXmlToHtmlConsolider" description="private">
			<!-- convertit en html le rapport xml fabriqué ci-dessus -->
			<junitreport todir="${workspace.deploy.junit.report.dir}/xml">
				<fileset dir="${workspace.deploy.junit.report.dir}/xml">
					<include name="TEST-*.xml" />
				</fileset>
				<report  format="frames" todir="${workspace.deploy.junit.report.dir}/html" />
			</junitreport> 
		</target>
	
	<target name="runJunitReportConsolider">
		<exec executable="${workspace.deploy.junit.report.dir}/html/index.html" vmlauncher="false" timeout="2000"/>
	</target>
	
	<target name="copyIoTests" description="private"> 
		<ForEachProjets  namePathAntProjetList="workspace.projet.name.list"  nameProperty="bilat.ant.workspace.projet.i" target="copyIoTestsi"/> 
	</target>
		
	<target name="copyIoTestsi" description="private">
		<echo message="${bilat.ant.workspace.projet.i}" />
		<ant antfile="projetManager.xml" target="copyIoTestsConsolider" inheritALL="false">	
			<property file="../Projet${bilat.ant.workspace.projet.i}.properties"/>
		</ant>
	</target>
	
	<!-- ***********************  -->
	<!--  	doc  consolider     -->
	<!-- ************************ -->
	
	<!-- ne depend pas workspaceCompilerJarer -->
	
	<target name="workspaceDocConsolider">
		<tstamp>
			<format property="year" pattern="yyyy" />
		</tstamp>
		<tstamp>
			<format property="year4" pattern="yyyy" offset="4" unit="year"/>
		</tstamp>
		<property name="dateCopyright" value="${year}-${year4}" />
		
		<mkdir dir="${workspace.deploy.doc.croiser.dir}" />
		<antcall target="cleanDocConsolider" />
		
		<!-- useexternalfile  because input of javadoc is limit to 127 characters long -->
		<javadoc  destdir="${workspace.deploy.doc.croiser.dir}"  useexternalfile="true"  private="false" windowtitle="${workspace.name} ${workspace.author}" splitindex="true" author="true" version="true" >
			
			<fileset  dir="${workspace.root.path}" >
				<include name="**/*.java"/> 
					
				<exclude name="**/*${workspace.test.class.suffixe}.java"/>
				<exclude name="**/ressources/**"/> 
				<exclude name="**/*.auml"/> <!-- model uml -->
								     
				<exclude name="**/test/**/*.java"/>
				<exclude name="**/tests/**/*.java"/>
				<exclude name="**/junit/**/*.java"/> 
			</fileset>
			
			<!-- avec useexternalfile="true" : le paragraphe ci-dessous ne marche pas, sinon  oui -->
			<!-- <bottom> 
				<![CDATA[<br><img src={@docRoot}/${projet.doc.imageCopyright} > 
				<br> <a href=${projet.doc.link.homePage}> www.he-arc.ch </a>
				<br><br><b> Copyright ${dateCopyright} &copy : ${workspace.author} , ${workspace.organisation}</b>]]>
			</bottom> -->	
		</javadoc> 
		
		<antcall target="workspaceCopyImageDoc" />
		<antcall target="zipDocConsolider" />		
	</target>
	
	<target name="workspaceCopyImageDoc" description="private">
		<ForEachProjets  namePathAntProjetList="workspace.projet.name.list" nameProperty="bilat.ant.workspace.projet.i" target="projeCopyImageDoci"/> 
	</target>
		
	<target name="projeCopyImageDoci" description="private">
		<echo message="${bilat.ant.workspace.projet.i} : copy Image Doc" />
		<copy todir="${workspace.deploy.doc.croiser.dir}/${projet.docImagesDir.name}" >
			<fileset dir="${workspace.root.path}/${bilat.ant.workspace.projet.i}/${projet.docImagesDir.name}" />
		</copy>
	</target>	
	
	<target name="workspaceDocConsoliderRun" description="Eclipse UseFull : one doc for workspace">
		<antcall target="workspaceDocConsolider" />
		<antcall target="workspaceRunDocConsolider" />
	</target>
	
	<target name="workspaceRunDocConsolider" >
		<exec executable="${workspace.deploy.doc.croiser.dir}/index.html" vmlauncher="false" timeout="2000"/>
	</target>
	
	 <target name="zipDocConsolider">
	 	<antcall target="cleanZipDocConsolider" />
		<zip basedir="${workspace.deploy.doc.croiser.dir}" destfile="${workspace.deploy.doc.croiser.zip.file}" compress="true" update="false" />
	</target>
	
	<target name="cleanDocConsolider" description="private"> 
		<parallel>
			<delete dir="${workspace.deploy.doc.croiser.dir}"/>	
			<antcall target="cleanZipDocConsolider" />
		</parallel>
	</target>
	
	<target name="cleanZipDocConsolider" description="private"> 
		<delete file="${workspace.deploy.doc.croiser.zip.file}"/>
	</target>
	
	<!-- ***********************  -->
	<!--  	doc each projet       -->
	<!-- ************************ -->	
	
	<target name="workspaceDoc" description="each projet">
		<ForEachProjets  namePathAntProjetList="workspace.projet.name.list" nameProperty="bilat.ant.workspace.projet.i" target="projetDoci"/> 
	</target>
		
	<target name="workspaceDocRun" description="Eclipse UseFull : create and run  doc">
		<antcall target="workspaceDoc" /> 
		<antcall target="workspaceRunDoc" /> 
	</target>
	
	<target name="projetDoci" description="private">
		<echo message="${bilat.ant.workspace.projet.i} : make doc" />
		<ant antfile="projetManager.xml" target="makeDoc" inheritALL="false">	
			<property file="../Projet${bilat.ant.workspace.projet.i}.properties"/>
		</ant>
	</target>	
	
	<!-- ***********************  -->
	<!--  	jar each projet       -->
	<!-- ************************ -->	
	
	<target name="workspaceJar" description="each projet">
		<ForEachProjets  namePathAntProjetList="workspace.projet.name.list"  nameProperty="bilat.ant.workspace.projet.i" target="projetJari"/> 
		<!--<antcall target="workspaceJarVersionRun" /> -->
	</target>
	
	<target name="workspaceJarRun" description="Eclipse UseFull : each projet : create and run jar version">
		<antcall target="workspaceJar" /> 
		<antcall target="workspaceRunJarVersion" /> 
	</target>
	
	<target name="projetJari" description="private">
		<echo message="${bilat.ant.workspace.projet.i} : jar" />
		<ant antfile="projetManager.xml" target="makeJar" inheritALL="false">	
			<property file="../Projet${bilat.ant.workspace.projet.i}.properties"/>
		</ant>
	</target>	
	
	<!-- ******************************  -->
	<!--  	run jar Version each projet  -->
	<!-- ******************************* -->	
	
	<target name="workspaceRunJarVersion" description="each projet">
		<ForEachProjets  namePathAntProjetList="workspace.projet.name.list" nameProperty="bilat.ant.workspace.projet.i" target="projetJarVersionRuni"/> 
	</target>
	
	<target name="projetJarVersionRuni" description="private">
		<echo message="${bilat.ant.workspace.projet.i} : jar run version" />
		<ant antfile="projetManager.xml" target="runJarVersion" inheritALL="false">	
			<property file="../Projet${bilat.ant.workspace.projet.i}.properties"/>
		</ant>
	</target>	
	
	<!-- ***********************  -->
	<!--  	run doc	each projet	  -->
	<!-- ************************ -->	
	
	<target name="workspaceRunDoc" description="each projet">
		<ForEachProjets namePathAntProjetList="workspace.projet.name.list"  nameProperty="bilat.ant.workspace.projet.i" target="projetDocRuni"/> 
	</target>
	
	<target name="projetDocRuni" description="private">
		<echo message="${bilat.ant.workspace.projet.i} : doc run" />
		<ant antfile="projetManager.xml" target="runDoc" inheritALL="false">	
			<property file="../Projet${bilat.ant.workspace.projet.i}.properties"/>
		</ant>
	</target>	
	
	<!-- ***********************  -->
	<!--  	Deployer each projet  -->
	<!-- ************************ -->	
		
	<target name="workspaceDeploy" description="Eclipse UseFull : each projet">
		<ForEachProjets namePathAntProjetList="workspace.projet.name.list"  nameProperty="bilat.ant.workspace.projet.i" target="projetDeployi"/> 
	</target>
	
	<!-- <target name="workspaceDeploy+" description="Eclipse UseFull : each projet + jarConsolider" >
		<antcall target="workspaceDeploy"/>
		<antcall target="workspaceCompilerJarer"/>
		<antcall target="workspaceDocConsoliderRun"/>
		<antcall target="workspaceZipSrcConsolider"/>
	</target> -->
	
	<!-- la compilation ne doit se faire qu'une fois, la target est deploy et non compil -->
	<target name="projetDeployi" description="private">
		<echo message="${bilat.ant.workspace.projet.i} : deploy" />
		<ant antfile="projetManager.xml" target="deploy" inheritALL="false">	
			<property file="../Projet${bilat.ant.workspace.projet.i}.properties"/>
		</ant>
	</target>	
		
	<!-- ***********************  -->
	<!--  	test each projet      -->
	<!-- ************************ -->	

	<target name="workspaceRunTest" description="each projet">
		<ForEachProjets namePathAntProjetList="workspace.projet.name.list"  nameProperty="bilat.ant.workspace.projet.i" target="projetRunHtmlTesti"/> 
	</target>
	
	<target name="projetRunHtmlTesti" description="private">
		<echo message="${bilat.ant.workspace.projet.i} : test" />
		<ant antfile="projetManager.xml" target="runJunit" inheritALL="false">	
			<property file="../Projet${bilat.ant.workspace.projet.i}.properties"/>
		</ant>
	</target>
	
	<!-- ***********************  -->
	<!--  	zip source		      -->
	<!-- ************************ -->	

	<target name="workspaceZipSrcALL" description="Eclipse useful : one zip for each projet">
		<ForEachProjets namePathAntProjetList="workspace.projet.name.list"  nameProperty="bilat.ant.workspace.projet.i" target="projetZipSrci"/> 
	</target>
		
	<target name="projetZipSrci" description="private">
		<echo message="${bilat.ant.workspace.projet.i} : projetZipSrci" />
		<ant antfile="projetManager.xml" target="zipSource" inheritALL="false">	
			<property file="../Projet${bilat.ant.workspace.projet.i}.properties"/>
		</ant>
	</target>
	
	<target name="workspaceZipSrcConsolider" description="Eclipse useful : one zip for all projet">
		<delete file="${workspace.deploy.src.zip.consolider.file}"/>
		<ForEachProjets namePathAntProjetList="workspace.projet.name.list"  nameProperty="bilat.ant.workspace.projet.i" target="workspaceZipSrcWorkspacei"/> 
	</target>
			
	<target name="workspaceZipSrcWorkspacei" description="private">
		<echo message="${bilat.ant.workspace.projet.i} : projetZipSrci" />	
		<ant antfile="projetManager.xml" target="zipSourceWorkspace" inheritALL="false">	
			<property file="../Projet${bilat.ant.workspace.projet.i}.properties"/>
			<property name="workspace.deploy.file.src.zip.name" value="${workspace.deploy.src.zip.consolider.file}" />
		</ant>
	</target>
	
	<!-- ***********************  -->
	<!--  	Clean All         	  -->
	<!-- ************************ -->
		
		<target name="workspaceCleanAll" description="Eclipse useFull">
			<!-- sequantial : because both workspaceCleanDeploy and ForEachProjets call same target in project -->
			<sequential>
				<antcall target="workspaceCleanDeploy" />
				<ForEachProjets  namePathAntProjetList="workspace.projet.name.list" nameProperty="bilat.ant.workspace.projet.i" target="projetCleanAlli"/> 
			</sequential> 
		</target>
		
		<target name="workspaceCleanDeploy" description="Eclipse useFull">
			<parallel>
				<antcall target="cleanClassConsolider" />
				<antcall target="cleanJarConsolider" />
				<antcall target="cleanInput" />
				<antcall target="cleanOutput" />
				<antcall target="cleanPersistance" />
				<antcall target="cleanSrcZipConsolider" />
				<antcall target="cleanDocZip" />
				<antcall target="cleanDoc" />
				<antcall target="cleanJunitReportConsolider" />
			</parallel>
			<ForEachProjets  namePathAntProjetList="workspace.projet.name.list" nameProperty="bilat.ant.workspace.projet.i" target="projetCleanAllDeployi"/> 
		</target>
		
		<target name="projetCleanAlli" description="private">
			<echo message="${bilat.ant.workspace.projet.i}" />
			<ant antfile="projetManager.xml" target="cleanAll" inheritALL="false">	
				<property file="../Projet${bilat.ant.workspace.projet.i}.properties"/>
			</ant>
		</target>	
		
		<target name="projetCleanAllDeployi" description="private">
				<echo message="${bilat.ant.workspace.projet.i}" />
				<ant antfile="projetManager.xml" target="cleanAllDeploy" inheritALL="false">	
					<property file="../Projet${bilat.ant.workspace.projet.i}.properties"/>
				</ant>
			</target>	
		
		<target name="cleanClassConsolider" description="private">
			<delete dir="${workspace.deploy.consolider.class.temp.dir}" includeemptydirs="true" />
		</target>	
		
		<target name="cleanInput" description="private"> 
			 <delete includeemptydirs="true">
				<fileset dir="${workspace.deploy.input.dir}" includes="**/*"/>
			</delete>
		</target>
		
		<target name="cleanOutput" description="private"> 
			 <delete includeemptydirs="true">
				<fileset dir="${workspace.deploy.output.dir}" includes="**/*"/>
			</delete>
		</target>
		
		<target name="cleanPersistance" description="private"> 
			 <delete includeemptydirs="true">
				<fileset dir="${workspace.deploy.persistance.dir}" includes="**/*"/>
			</delete>
		</target>
		
		<target name="cleanJarConsolider" description="private"> 
			 <delete includeemptydirs="false">
				<fileset dir="${workspace.deploy.jar.consolider.dir}" includes="*.jar"/>
			</delete>
		</target>
		
		<target name="cleanSrcZipConsolider" description="private"> 
			<delete file="${workspace.deploy.src.zip.consolider.file}"/>
		</target>
		
		<target name="cleanDocZip" description="private"> 
			 <delete includeemptydirs="true">
				<fileset dir="${workspace.deploy.path}/docs" includes="**/*" />
			</delete>
		</target>
		
		<target name="cleanDoc" description="private"> 
			 <delete includeemptydirs="true">
				<fileset dir="${workspace.deploy.path}/docZip" includes="**/*" />
			</delete>
		</target>
		
		<target name="cleanJunitReportConsolider" description="private"> 
			<delete includeemptydirs="true">
					<fileset dir="${workspace.deploy.junit.report.dir}" includes="**/*" />
			</delete>
		</target>
		
		<!-- ***********************  -->
		<!--  	Clean Class         -->
		<!-- ************************ -->	
			
		<target name="workspaceCleanClass">
			<ForEachProjets  namePathAntProjetList="workspace.projet.name.list"  nameProperty="bilat.ant.workspace.projet.i" target="projetCleanClassi"/> 
		</target>
			
		<target name="projetCleanClassi" description="private">
			<echo message="${bilat.ant.workspace.projet.i}" />
			<ant antfile="projetManager.xml" target="cleanClass" inheritALL="false">	
				<property file="../Projet${bilat.ant.workspace.projet.i}.properties"/>
			</ant>
		</target>
	
</project>
